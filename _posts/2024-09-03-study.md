---
title: 70ì¼ì°¨
date: 2024-09-03 20:28:00 +0900
categories: [ë„¤ì´ë²„ í´ë¼ìš°ë“œ ë¹„íŠ¸ìº í”„]
tags: [ê³µë¶€ë€ê±¸ í•´ë³´ì]
description: ê³µë¶€ë€ê±¸ í•´ë³´ì
media_subpath:
permalink: /posts/study-70/
---

### ì„œë¸”ë¦¿ì— ë°ì´í„° ë³´ë‚´ê¸° -getë°©ì‹

![image.png](/assets/img/0903/image.png){: w="600"}

> get ë°©ì‹ì€ URLì— ì •ë³´ë¥¼ í¬í•¨í•˜ì—¬ ë³´ë‚´ëŠ” ë°©ë²•ì´ë‹¤ ì •ë³´ë¥¼ ë³´ë‚¼ë•Œ ìœ„ì— ê·¸ë¦¼ ì²˜ëŸ¼ ë¹¨ê°„ê³³ì„ í†µí•´ ë³´ë‚´ë©° í•´ë‹¹ í˜•íƒœì˜ ì´ë¦„ì„ query stringì´ë¼ê³  í•œë‹¤

> ìœ„ ê·¸ë¦¼ì—ì„œ noëŠ” parameter name

> 11ì€ parameter valueë¼ê³  í•˜ë©° ë°˜ë“œì‹œ ?ë’¤ì— ì‹œì‘í•œë‹¤

> ê·¸ëŸ¬ë©´ ì´ëŸ¬í•œ í˜•íƒœë¡œ ë³´ëƒˆìœ¼ë©´ ë°›ëŠ” ë²•ì€ ì–´ë–»ê²Œ í•˜ëŠ” ê²ƒì¼ê¹Œ?

### getParameter()

> ì„œë²„ì— ë³´ë‚¸ ë°ì´í„°ë¥¼ ê°€ì§€ê³  ì˜¤ëŠ” ë°©ë²•ì€ ServletRequestì— getParameterë¥¼ ì‚¬ìš©í•˜ì—¬ ê°’ì„ ê°€ì§€ê³  ì˜¤ë©´ë˜ë©°

> ()ì•ˆì—ëŠ” parameter nameì„ ë„£ì–´ì£¼ì–´ ì›í•˜ê³ ì í•˜ëŠ” ë°ì´í„° ê°’ì„ ê°€ì§€ê³  ì˜¬ ìˆ˜ ìˆë‹¤

### HTTP í”„ë¡œí† ì½œ - GETìš”ì²­ê³¼ POSTìš”ì²­

> ì„œë¸”ë¦¿ì— ë°ì´í„°ë¥¼ ë³´ë‚´ëŠ” ë°©ë²•ì´ 2ê°€ì§€ê°€ ìˆëŠ”ë° ê·¸ê²ƒì´ ìœ„ì—ì„œ ì„¤ëª…í•œ getê³¼ ë‹¤ë¥¸ í•˜ë‚˜ëŠ” postì´ë‹¤

```jsx
GET /ex04/s1?name=ABC%EA%B0%80%EA%B0%81%EA%B0%84&age=20 HTTP/1.1 //ë¦¬í€˜ìŠ¤íŠ¸ ë¼ì¸
User-Agent: PostmanRuntime/7.41.2 //ì—¬ê¸°ì„œ ë¶€í„° ë°‘ì—ê¹Œì§€ í—¤ë”
Accept: */*
Cache-Control: no-cache
Postman-Token: fd0feee0-6cf8-403f-92ee-06cc17e1da08
Host: localhost:8080
Accept-Encoding: gzip, deflate, br
Connection: keep-alive
```

> Getì€ ë©”ì„œë“œë¡œ í•´ë‹¹ í”„ë¡œí† ì½œì´ ì–´ë– í•œ ê²ƒì¸ì§€ ì•Œë ¤ì£¼ëŠ” ì—­í• ì„ í•œë‹¤

> ë©”ì†Œë“œì—ëŠ” ì—¬ëŸ¬ê°€ì§€ ì¢…ë£Œê°€ ìˆë‹¤

- GET
- POST
- HEAD
- PUT
- DELETE
- OPTIONS
- TRACE
- CONNECT

> ê·¸ ë‹¤ìŒì— ìˆëŠ” ê²ƒì€ Request-URIë¡œ /ex04/s1?name=ABC%EA%B0%80%EA%B0%81%EA%B0%84&age=20 GETì€ì´ URIì— ë°ì´í„°ë¥¼ ë‹´ì•„ ì „ë‹¬í•œë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤

> ê·¸ë¦¬ê³  ê·¸ ë’¤ì—ëŠ” HTTPì˜ ë²„ì „ì„ ë‚˜íƒ€ë‚¸ë‹¤

> ì²« ì¤„ì„ ì œì™¸í•œ ëª¨ë“ ì¤„ì€ headerë¼ê³  ë¶€ë¥´ë©° headerëŠ” ìš”ì²­ì„ ì„¤ëª…í•˜ëŠ” ì •ë³´ë¥¼ ì•Œë ¤ì£¼ëŠ” ì¹œêµ¬ì´ë‹¤

> ê·¸ë¦¬ê³  headerì—ë„ ì•„ë˜ì²˜ëŸ¼ ì—¬ëŸ¬ê°€ì§€ ì¢…ë¥˜ê°€ ìˆë‹¤

- general
  - Date
  - connection
  - cache-control
  - pragma
- entity
  - content-Length
  - content-type
  - Last-Modifer
  - expires
  - content-encodng
- request
  - accept
  - Host
  - referer
  - user-Agent
  - authorization
  - Accept-Encoding
  - accept-Language
- response
  - Location
  - server

### post ìš”ì²­ì¼ë•Œ

```jsx
POST /ex04/s1 HTTP/1.1
User-Agent: PostmanRuntime/7.41.2
Accept: */*
Cache-Control: no-cache
Postman-Token: e8d32933-7d88-4fbd-bd8e-6b4ba225e103
Host: localhost:8080
Accept-Encoding: gzip, deflate, br
Connection: keep-alive
Content-Type: application/x-www-form-urlencoded
Content-Length: 33

name=%EA%B0%80%EA%B0%81ABC&age=30
```

> Getì—ì„œëŠ” URIì— ì •ë³´ë¥¼ ë‹´ì•˜ì§€ë§Œ POSTëŠ” name=%EA%B0%80%EA%B0%81ABC&age=30 message-bodyì— ë°ì´í„°ë¥¼ ë‹´ì•„ ë³´ë‚¸ë‹¤ ì´ê²ƒì„ entityë¼ê³  ë¶€ë¥´ê¸°ë„ í•œë‹¤

### URL

> ì´ë²ˆì—ëŠ” add ì„œë¸”ë¦¿ì„ ë§Œë“¤ê²ƒì´ë‹¤ ì–´ë–»ê²Œ í•˜ë©´ htmlì— ë°ì´í„° ê°’ì„ ìë°”ë¡œ ë³´ë‚¼ ìˆ˜ ìˆì„ê¹Œ?

> URLì£¼ì†Œë¥¼ í™œìš©í•  ê²ƒì´ë‹¤ ì¼ë‹¨ htmlíŒŒì¼ì— ì ‘ê·¼í•˜ëŠ” ë²•ì„ ì•Œì•„ë³´ì

> Uniform Resource Locatorì˜ ì•½ìì´ê³ 

> URIëŠ” Identififyì˜ ì•½ìì´ë‹¤

- URI
  - URL = http://ì„œë²„:í¬íŠ¸/ìì›ë²ˆí˜¸
  - URN = urn:isbn:123456

> URLì—ëŠ” ë™ì ìì›ì„ ë‚˜íƒ€ë‚´ê±°ë‚˜ ì •ì ìì›ì„ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆë‹¤

![image.png](/assets/img/0903/image2.png){: w="600"}

### URL Encoding = Percent(%) Encoding

> íŒŒì¼ì— ì ‘ê·¼í•˜ëŠ” ë°©ë²•ì„ ì•Œì•˜ìœ¼ë‹ˆ ì´ì œëŠ” ê±°ê¸°ì—ì„œ ë‚˜ì˜¤ëŠ” ê°’ì„ ì˜®ê¸°ëŠ” ë°©ë²•ì„ ì•Œì•„ë³´ì

> URLì„ ì‘ì„±í•  ë•Œ URLì˜ ë¬¸ë²•ì— í•´ë‹¹í•˜ëŠ” ë¬¸ìëŠ” ë‹¤ë¥¸í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•˜ëŠ”ë° ê·¸ê²ƒì´

> RFC(ê¶Œê³ ì•ˆ)-3986ì´ë‹¤ ê·¸ë ‡ê¸°ì— ì´ ëª…ì„¸ì— ë”°ë¼ URLì„ ì‘ì„±í•´ì•¼í•œë‹¤

- Resulved Keyboard íŠ¹ì§•ìœ¼ë¡œëŠ” íŠ¹ì • ë¬¸ìë¥¼ í‘œí˜„í• ë•Œ ì•„ë˜ì˜ ë¬¸ìëŠ” ë¬¸ì ê·¸ëŒ€ë¡œ ì‚¬ìš©í•  ìˆ˜ê°€ ì—†ë‹¤

| !   | %21 |
| --- | --- |
| #   | %23 |
| $   | %24 |
| &   | %26 |
| â€˜   | %27 |
| (   | %28 |
| )   | %29 |
| \*  | %2A |
| +   | %2B |
| ,   | %2C |
| /   | %2F |
| :   | %3A |
| ;   | %3B |
| =   | %3D |
| ?   | %3F |
| @   | %40 |
| [   | %5B |
| ]   | %5D |

> Unreserved Characters : URLì—ì„œ ë°ì´í„°ë¥¼ í‘œí˜„í•  ë•Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë¬¸ìë¥¼ ë§í•œë‹¤

> A-Za-20-9- . \_~

> í•œê¸€ì€ %ë¬¸ìì½”ë“œ %ë¬¸ìì½”ë“œë¡œ í‘œí˜„í•œë‹¤

```jsx
"ABCê°€ê°" -> 414243EAB080EAB081 -> ABC%EA%B0%80%EA%B0%81
```

### í´ë¼ì´ì–¸íŠ¸ê°€ ë³´ë‚¸ ê°’ êº¼ë‚´ê¸°

![image.png](/assets/img/0903/image3.png){: w="600"}

> ê°’ì„ êº¼ë‚´ëŠ” ë°©ë²•ì€ getParameterë¡œ ê°€ì§€ê³  ì˜¨ë‹¤

### í´ë¼ì´ì–¸íŠ¸ê°€ ë³´ë‚¸ í•œê¸€ ë°ì´í„°ë¥¼ êº¼ë‚¼ ë•Œ ê¹¨ì§€ëŠ” ì´ìœ 

![image.png](/assets/img/0903/image4.png){: w="600"}

> íŒŒë€ìƒ‰ í™”ì‚´í‘œëŠ” %xx ë¬¸ìë¥¼ xxìˆ«ìë¡œ ì„œë²„ì—ì„œ ìë™ë³€í™˜ì„ í•´ì£¼ë©° ì´ëŸ¬í•œ í˜•íƒœë¥¼ URLë””ì½”ë”©ì´ë¼ê³  í•œë‹¤ ì´ëŸ¬í•œ ê³¼ì •ì„ getê³¼ postë¡œ ë°”ê¾¸ì–´ ì‹¤í–‰í•˜ë©´ ì–´ë–»ê²Œ ë ê¹Œ?

![image.png](/assets/img/0903/image5.png){: w="600"}

> getë°©ì‹ì€ í´ë¼ì´ì–¸íŠ¸ê°€ ë³´ë‚¸ ë¬¸ìì½”ë“œë¥¼ UTF-8ì´ë¼ê³  ê°„ì£¼í•˜ê³  UTF-16ìœ¼ë¡œ ë³€í™˜í•˜ë©° í•œê¸€ ê¸€ìë¥¼ í•˜ë‚˜ì˜ ë­‰í……ì´ë¡œ ì¸ì‹í•˜ì—¬ ê¸€ìë¥¼ ë³€í™˜í•œë‹¤

> í•˜ì§€ë§Œ postë°©ì‹ì€ í•´ë‹¹ ë¬¸ìë¥¼ í•˜ë‚˜í•˜ë‚˜ ì˜ë¼ì„œ ì½ê³  ì¶œë ¥í•˜ê¸° ë•Œë¬¸ì— ìš°ë¦¬ê°€ ì›í•˜ëŠ” ê¸€ìê°€ ì•„ë‹Œ ë‹¤ë¥¸ ê¸€ìê°€ ê¹¨ì ¸ì„œ ì¶œë ¥ì´ ëœë‹¤

### Getìš”ì²­ VS POST ìš”ì²­

|                 | GET                             | POST         |
| --------------- | ------------------------------- | ------------ |
| ë°ì´í„° ì „ì†¡ë°©ì‹ | URLì— í¬í•¨(Query-String)        | Message-Body |
| ë°ì´í„° ì „ì†¡í¬ê¸° | ì›¹ ì„œë²„ë³„ë¡œ URL í¬ê¸°ë¥¼ ì œí•œí•œë‹¤ |

> ì‘ì€ë°ì´í„° ì „ì†¡
> (ì¡°íšŒê¸€ì˜ ë²ˆí˜¸, ê²€ìƒ‰ì–´ ë“±) | ì œí•œì—†ìŒ â†’ ëŒ€ëŸ‰ ë°ì´í„°
> (ê²Œì‹œê¸€, ì´ë¯¸ì§€) |
> | ë°”ì´ë„ˆë¦¬ ë°ì´í„° ì „ì†¡ | URLì„ í…ìŠ¤íŠ¸ë¡œ â†’ ì „ì†¡ì´ ë¶ˆê°€í•˜ë‹¤
> ë‹¨ ë°”ì´ë„ˆë¦¬ ë°ì´í„°ë¥¼ í…ìŠ¤íŠ¸ë¡œ ë³€í™˜í•œ ê²½ìš°ì—ëŠ” ê°€ëŠ¥í•˜ë‹¤(BASE 64) | apllication/x-www-form-uncleancodedë°©ì‹ìœ¼ë¡œëŠ” â†’ ë¶ˆê°€
> multipart/form-dataë¡œëŠ” ê°€ëŠ¥í•˜ë‹¤ |
> | ìš©ë„ | URLì€ ì›¹ë¸Œë¼ìš°ì €ê°€ cacheì— ë³´ê´€ì„í•˜ë©°
> ë‹¤ë¥¸ì‚¬ìš©ìì—ê²Œ ë…¸ì¶œì´ ë  ìˆ˜ ìˆë‹¤ë¼ëŠ” ë‹¨ì ì´ ìˆë‹¤
> ê·¸ë ‡ê¸° ë•Œë¬¸ì— ë…¸ì¶œì´ ë˜ì–´ë„ ë¬´ë°©í•œ ê²½ìš°ì´ê±°ë‚˜
> URLì— ë°ì´í„°ë¥¼ ë‹´ì•„ì•¼í•˜ëŠ” ê²½ìš°ì— ì‚¬ìš©í•œë‹¤ | ëŒ€ëŸ‰ë°ì´í„°ë¥¼ ì „ì†¡í•  ë•Œ ì‚¬ìš©í•œë‹¤
> ë°”ì´ë„ˆë¦¬ ë°ì´í„°ë¥¼ ì „ì†¡í•  ë•Œ
> ë…¸ì¶œë˜ì–´ì„œëŠ” ì•ˆë˜ëŠ” ë°ì´í„°ë¥¼ ì „ì†¡í•  ë•Œ
> ë¡œì»¬ì— ë³´ê´€ë˜ì–´ì„œëŠ” ì•ˆë˜ëŠ” ë°ì´í„°ë¥¼ ì „ì†¡í•  ë•Œ ì‚¬ìš©í•œë‹¤ |

### íŒŒì¼ ì—…ë¡œë“œ(multipart / form-data)

```jsx
POST http://localhost:8080/ex04/s3
200
11 ms
POST /ex04/s3 HTTP/1.1
User-Agent: PostmanRuntime/7.41.2
Accept: */*
Cache-Control: no-cache
Postman-Token: 90941461-da8f-4525-9301-75f57625a11e
Host: localhost:8080
Accept-Encoding: gzip, deflate, br
Connection: keep-alive
Content-Type: multipart/form-data; boundary=--------------------------786125945739689912339871
Content-Length: 6122

----------------------------786125945739689912339871
Content-Disposition: form-data; name="name"
ABCê°€ê°
----------------------------786125945739689912339871
Content-Disposition: form-data; name="age"
30
----------------------------786125945739689912339871
Content-Disposition: form-data; name="photo"; filename="photo.jpeg"
<photo.jpeg>
----------------------------786125945739689912339871--
```

> ê°’ê³¼ ê°’ ì‚¬ì´ë¥¼ êµ¬ë¶„í•˜ëŠ” ë¬¸ìì—´

```bash
//ì¼ë°˜ë°ì´í„°
----------------------------786125945739689912339871
Content-Disposition: form-data; name="name"
ABCê°€ê°

//ì¼ë°˜ë°ì´í„°
----------------------------786125945739689912339871
Content-Disposition: form-data; name="age"
30

//íŒŒì¼ë°ì´í„°
----------------------------786125945739689912339871
Content-Disposition: form-data; name="photo"; filename="photo.jpeg"
<photo.jpeg>

----------------------------786125945739689912339871--
```

> ì´ í•œ ë‹¨ë½ì„ partë¼ê³  ë¶€ë¥´ë©° ë§¨ë°‘ì— ì½”ë“œì— â€” ì´ 2ê°œëŠ” ì„œë²„ì— ë³´ë‚´ëŠ” ë°ì´í„°ì˜ ëì„ í‘œì‹œí•œë‹¤

> í•˜ì§€ë§Œ ë°ì´í„°ë¥¼ ë„£ì–´ë„ ì™œ nullê°’ì´ ì¶œë ¥ë˜ëƒ ê·¸ ì´ìœ ëŠ” multipart/form-dataí˜•ì‹ìœ¼ë¡œ ì „ì†¡ëœ ë°ì´í„°ëŠ” ë”°ë¡œ ì„¤ì •ì„ í•´ì•¼ êº¼ë‚¼ìˆ˜ê°€ ìˆê¸° ë•Œë¬¸ì´ë‹¤

> ì•„ë˜ì™€ ê°™ì´ ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ë©´ ëœë‹¤ ì˜†ì— () ëŠ” íŒŒì¼ì˜ í¬ê¸°ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤ ê·¸ëŸ°ë° 1íŒŒì¼ë‹¹ 10ë©”ê°€ê°€ ë„˜ì–´ê°€ë©´ ì„œë²„ì—ì„œ ëŒë ¤ë³´ë‚¸ë‹¤ ë¼ëŠ”ê²ƒì„ ì•Œì•„ë‘ì

```java
@MultipartConfig(maxFileSize = 1024 * 1024 * 10)
@WebServlet("/ex04/s5")
public class Servlet05 extends GenericServlet {

}
```

<aside>
ğŸ’¡

í¼íƒœê·¸ì—ì„œ ë©”ì†Œë“œë¥¼ ì„¤ì •í•˜ì§€ ì•Šìœ¼ë©´ ê¸°ë³¸ì´ getìš”ì²­ì´ë‹¤

</aside>

### ì ˆëŒ€ URLê³¼ ìƒëŒ€ URL

```html
<h2>GET ìš”ì²­ìœ¼ë¡œ íŒŒì¼ ì—…ë¡œë“œ</h2>
<form action="s3" method="get">
  ì´ë¦„: <input type="text" name="name" /><br />
  ë‚˜ì´: <input type="number" name="age" /><br />
  ì‚¬ì§„: <input type="file" name="photo" /><br />
  <input type="submit" value="GET ì „ì†¡" />
</form>
```

> form íƒœê·¸ë¥¼ ë³´ë©´ action=â€s3â€ë¼ê³  ì í˜€ìˆëŠ”ë° ì´ê±¸ ìš°ë¦¬ëŠ” ìƒëŒ€ê²½ë¡œë¼ê³  í•œë‹¤

> ìƒëŒ€ê²½ë¡œëŠ” / ë¡œì‹œì‘í•˜ì§€ ì•ŠëŠ” ê²½ë¡œë¥¼ ìƒëŒ€ê²½ë¡œë¼ê³  í•˜ë©° í˜„ì¬í˜ì´ì§€ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ê²½ë¡œê°€ ê²°ì •ëœë‹¤

> (https://localhost:8888/ex04/s3)

```html
<h2>GET ìš”ì²­ìœ¼ë¡œ íŒŒì¼ ì—…ë¡œë“œ</h2>
<form action="/s3" method="get">
  ì´ë¦„: <input type="text" name="name" /><br />
  ë‚˜ì´: <input type="number" name="age" /><br />
  ì‚¬ì§„: <input type="file" name="photo" /><br />
  <input type="submit" value="GET ì „ì†¡" />
</form>
```

> ì´ë²ˆì—ëŠ” ì ˆëŒ€ ê²½ë¡œë¡œ / ê°€ ë“¤ì–´ê°€ìˆëŠ” ê²ƒì„ ë§í•œë‹¤

> ((https://localhost:8888/s3))

### paylod(ìœ ë£Œí•˜ì¤‘ = ì˜®ê¸°ëŠ” ì§ì—ì„œ ì‹¤ì œ ìˆ˜ì†¡ë£Œë¥¼ ë¶€ê³¼í•˜ëŠ” ì§)

![image.png](/assets/img/0903/image6.png){: w="600"}

> í•œë²ˆ ì•Œì•„ë‘ê³  ê°€ë©´ ì¢‹ì„ê²ƒ ê°™ì€ ê²ƒì´ë‹¤ paylodëŠ” ì„œë²„ì— ë³´ë‚´ê³  ì‹¶ì€ ë°ì´í„° ìˆœìˆ˜ì•ˆì— ë“¤ì–´ê°€ìˆëŠ” ë°ì´í„°ë¥¼ ë§í•œë‹¤

> ì´ì „ì— ìˆë˜ í—¤ë”ì™€ ë°”ë””ì˜ í”„ë¡œí† ì½œë“¤ì„ ì œì™¸í•œ ìˆœìˆ˜ ë„˜ì–´ê°€ëŠ” ë°ì´í„°ë¼ê³  ìƒê°í•˜ë©´ ëœë‹¤

![image.png](/assets/img/0903/image7.png){: w="600"}

### ë©€í‹° íŒŒíŠ¸ ì „ì†¡ ë°ì´í„° ì²˜ë¦¬

```bash
POST http://localhost:8080/ex04/s3
200
11 ms
POST /ex04/s3 HTTP/1.1
User-Agent: PostmanRuntime/7.41.2
Accept: */*
Cache-Control: no-cache
Postman-Token: 90941461-da8f-4525-9301-75f57625a11e
Host: localhost:8080
Accept-Encoding: gzip, deflate, br
Connection: keep-alive
Content-Type: multipart/form-data; boundary=--------------------------786125945739689912339871
Content-Length: 6122

----------------------------786125945739689912339871
Content-Disposition: form-data; name="name"
ABCê°€ê°
----------------------------786125945739689912339871
Content-Disposition: form-data; name="age"
30
----------------------------786125945739689912339871
Content-Disposition: form-data; name="photo"; filename="photo.jpeg"
<photo.jpeg>
```

> ë§Œì•½ ì´ë¯¸ì§€ì™€ ê°™ì€ íŒŒì¼ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ëŠ”ë²•ì€ ì–´ë–»ê²Œ í•´ì•¼ ë ê¹Œ? í•´ë‹¹ ë¶€ë¶„ì„ ì½ê²Œ ëœë‹¤ë©´

- ì„œë¸”ë¦¿ 3.0ì—ì„œ ì œê³µí•˜ëŠ” APIì‚¬ìš©ì„ í•˜ì—¬ MultipartConfig ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ì—¬ partê°ì²´ë¥¼ ì‚¬ìš©í•œë‹¤
- third-part Library(ì œ 3ìê°€ ë§Œë“¤ì—ˆë‹¤) ê·¸ ì˜ˆì‹œë¡œëŠ” ì•„íŒŒì¹˜ ê·¸ë£¹ì˜ ì˜¤í”ˆì†ŒìŠ¤ì™€ íŒŒì¼ ì—…ë¡œë“œì˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš© ë°©ë²•ë“±ì´ ìˆë‹¤

> 1ë²ˆì€ ìœ„ì—ì„œ ë‹¤ë£¨ì–´ ë³´ì•˜ìœ¼ë‹ˆ 2ë²ˆì— ëŒ€í•´ ì•Œì•„ë³´ì

### Apache commons-fileuploadë¼ì´ë¸ŒëŸ¬ë¦¬

![image.png](/assets/img/0903/image8.png){: w="600"}

```bash
    ServletFileUpload multipartDataHandler = new ServletFileUpload(fileItemFactory);
```

> ì´ ê¸°ëŠ¥ì„ í†µí•˜ì—¬ í•´ë‹¹ ë°ì´í„°ë¥¼ ë°°ì—´ë¡œ ì €ì¥í•˜ë©° í•´ë‹¹ ë°°ì—´ì„ ë¦¬ìŠ¤íŠ¸ì— ì˜®ê²¨ì¤€ë‹¤

```bash
    try {
      // parseRequest()
      // => í´ë¼ì´ì–¸íŠ¸ê°€ ë³´ë‚¸ ë©€í‹° íŒŒíŠ¸ ë°ì´í„°ë¥¼ ì½ì–´ì„œ FileItem ê°ì²´ ë°°ì—´ë¡œ ë½‘ì•„ë‚´ëŠ” ì¼ì„ í•œë‹¤.
      List<FileItem> parts = multipartDataHandler.parseRequest((HttpServletRequest) req);

      for (FileItem part : parts) {
        if (part.isFormField()) {
          // íŒŒíŠ¸ì˜ ë°ì´í„°ê°€ ì¼ë°˜ ë°ì´í„°ë¼ë©´
          paramMap.put(part.getFieldName(), // í´ë¼ì´ì–¸íŠ¸ê°€ ë³´ë‚¸ íŒŒë¼ë¯¸í„° ì´ë¦„
              part.getString("UTF-8") // íŒŒë¼ë¯¸í„°ì˜ ê°’. ê°’ êº¼ë‚¼ ë•Œ ì¸ì½”ë”©ì„ ì§€ì •í•´ì•¼ í•œë‹¤.
              );

        } else {
          // íŒŒíŠ¸ì˜ ë°ì´í„°ê°€ íŒŒì¼ì´ë¼ë©´
          // => upload/ ë””ë ‰í† ë¦¬ì— íŒŒì¼ì„ ì €ì¥í•œë‹¤.

          // ì—…ë¡œë“œ íŒŒì¼ì„ ì €ì¥í•  ë•Œ ì‚¬ìš©í•  íŒŒì¼ëª…ì„ ì¤€ë¹„í•œë‹¤.
          // => ì›ë˜ì˜ íŒŒì¼ëª…ì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.
          // => ë‹¤ë¥¸ í´ë¼ì´ì–¸íŠ¸ê°€ ê°™ì€ ì´ë¦„ì˜ íŒŒì¼ì„ ì—…ë¡œë“œ í•˜ë©´ ê¸°ì¡´ íŒŒì¼ì„ ë®ì–´ì“¸ ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤.
          String filename = UUID.randomUUID().toString();
          //UUID íŒŒì¼ë°ì´í„°ì— ëŒ€í•œ ê³ ìœ ì‹ë³„ìì´ë‹¤

          // ì „ì²´ íŒŒì¼ ê²½ë¡œë¥¼ ì¤€ë¹„í•œë‹¤.
          // => /java-web/upload/íŒŒì¼ëª…
          File file = new File(this.uploadDir + "/" + filename);
          System.out.println(file.getCanonicalPath());

          // ì„ì‹œ í´ë”ì— ì €ì¥ëœ íŒŒì¼ì„ ì§€ì •ëœ íŒŒì¼ ê²½ë¡œë¡œ ì˜®ê¸´ë‹¤.
          part.write(file);

          paramMap.put(part.getFieldName(), // í´ë¼ì´ì–¸íŠ¸ê°€ ë³´ë‚¸ íŒŒë¼ë¯¸í„° ì´ë¦„
              filename // íŒŒì¼ ì´ë¦„
              );
        }
      }
```

> ê·¸ë¦¬ê³  forë¬¸ì„ í™œìš©í•˜ì—¬ ì§„í–‰í•˜ë©° ifë¬¸ìœ¼ë¡œ í•´ë‹¹ ë°ì´í„°ê°€ ì¼ë°˜ë°ì´í„°ì´ë©´ ê·¸ëƒ¥ ì¼ë°˜ì ìœ¼ë¡œ ë³´ë‚´ì£¼ê³ 

> íŒŒì¼ ë°ì´í„°ì´ë©´ í•´ë‹¹ ê³ ìœ ì‹ë³„ìë¥¼ ë°›ì•„ ì €ì¥í•˜ê³  í•´ë‹¹ ì „ì²´ íŒŒì¼ì˜ ê²½ë¡œë¥¼ ì¤€ë¹„í•˜ì—¬ ì¶œë ¥í•´ì¤€ë‹¤
