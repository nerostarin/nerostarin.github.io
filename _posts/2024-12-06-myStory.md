---
title: 네이버클라우드 final 프로젝트를 마치며
date: 2024-12-06 16:00:00 +0900
categories: [네이버 클라우드 비트캠프]
tags: [마지막이야]
description: 회고록
media_subpath:
permalink: /posts/last-story/
---

### 프로젝트 개요

> 여행을 가면 추억을 남기기 위해 우리는 무엇을 하는지를 생각해보자 사람이든, 풍경이든, 우리는 많은 사진을 찍을 것이다. 이곳저곳을 다니며 많이 쌓인 여행 사진 다시 추억하려면 과거의 내역으로 쭉 거슬러 올라가야 한다.

> 이 프로젝트는 “좀 더 편하게, 여행 기록이 한 눈에 보이게 할 수 없을까?”라는 물음에서 시작되었고 여행 사진을 모아 나만의 지도를 만들고, 이를 일기로 기록을하는 서비스를 제공하는 웹 페이지이다.

### 프로젝트 일정

- 2024.09 ~ 2024.11

### 프로젝트 구성원

- 이선아 (팀장)
- 장혜정 (프론트 엔드)
- 이가람 (프론트 엔드, 백엔드)
- 김주연 (백엔드)
- 황민지 (프론트 엔드, 백엔드)
- 이태정 (프론트 엔드, 백엔드)

### 사용기술

> 사용 언어 : java, js

> front 사용 기술 : React, axios, NGINX

> back 사용 기술 : SpringBoot, SpringSecurity, MyBatis, JWT, MySQL

> DevOps 사용 기술 : Docker, Jenkins, 사용 API : Flicking, SweetAlert2, LoadableComponents, JavaMail, Google API

### ERD

![image.png](/assets/img/theend/image.png)

### 아키텍쳐

![image.png](/assets/img/theend/image2.png)

> CI / CD

![image.png](/assets/img/theend/image3.png)

### 내가 맡은 기능

**✅ 회원가입**

- 이메일
  - **이메일 중복 체크 후 이메일 본인 인증 진행**
  - 이메일 중복 시 중복 이메일 문구 노출
  - 이메일 형식이 아닐때 텍스트 출력
  - 이메일 작성시에 확인 알림 출력
  - 인증번호 발급
  - 인증번호 확인
- PW / 닉네임 입력 받기
- 개인정보 동의 체크
- 회원가입 버튼
  - 필수 정보 미 입력시 알림
  - _필수 정보 정상 입력 후 클릭 시 로그인 화면으로 이동_

**✅ 로그인**

- ID / PW 정보 입력 받기
- 로그인 버튼
  - _필수 입력 정보 미 입력 시 필수 정보 입력 필요 문구 노출_
  - _없는 회원 정보 입력 시 존재하지 않는 회원 문구 노출_
  - _필수 입력 정보 정상 입력 후 클릭 시 메인페이지(지도) 화면으로 이동_
- 아이디 찾기 버튼
  - **클릭 시** 아이디 찾기 페이지로 이동
- 비밀번호 찾기 버튼
  - **클릭 시** 비밀번호 찾기 페이지로 이동
- 회원가입 버튼
  - **클릭 시** 회원가입 페이지로 이동
- 자동 로그인 버튼
  - _Check : 다음 로그인 시 자동 로그인되어 메인 페이지(지도) 화면으로 이동_
  - _Uncheck : 다음 로그인 시 로그인 페이지 노출_
- 토큰을 활용하여 로그인 및 로그아웃 처리
  - 로그인시에 토큰을 생성
  - 로그인 중에 토큰확인을 통하여 로그인 유지
  - refresh token을 통하여 access token 재생성
  - 로그인 만료시에 로그인화면으로 이동

**✅ ID / PW 찾기**

- 아이디 찾기
  - _이메일 입력 후 본인 인증 시 해당 이메일이 가입된 이메일인지 여부 확인_
- 비밀번호 찾기
  - 이메일 입력 후 본인 인증 시 해당 아이디에 관련된 비밀번호를 재생성 이후 로그인 화면으로 이동

**✅ 회원 변경**

- 비밀번호 인증 시 회원 비밀번호, 닉네임, 프로필 사진 변경 가능

**✅ 회원 탈퇴**

- 비밀번호 인증 시 회원 탈퇴 가능

**✅ 스토리 무한 스크롤**

- 스크롤시에 일정한 개수마다 스토리 갱싱

**✅ 관리자 계정**

- 관리자 로그인 시에 회원 목록 출력
- 삭제 버튼을 누를시에 해당 회원의 게시물 및 모든 기록 삭제
- 게시글 버튼 클릭시 모든 사용자의 게시물 출력
- 게시글 삭제

### 프로젝트를 하다가 어려웠던점

> 프로젝트를 진행하며 가장 어려웠던 부분은 **토큰활용과 로그인 유지 처리**였다.

> 처음에는 단순히 토큰으로 로그인만 구현하면 모든 것이 해결될 줄 알았지만, 현실은 그렇지 않다. 특히 **액세스 토큰**과 **리프레시 토큰**의 개념을 충분히 이해하지 못한 채 작업을 진행하면서 많은 시행착오를 겪었던것 같다.

> 리프레시 토큰을 재생성하면 자동으로 모든 것이 처리될 줄 알았지만, 실제로는 그렇지 않았고 리프레시 토큰에 사용자 정보나 특정 값을 포함해야 한다는 사실을 나중에서야 깨달았다. 이후 이러한 무지함 때문에 한번더 발목을 잡는 일이 생긴다….

> 위 오류를 해결하고 프론트엔드에서 **1초 단위로 시간을 체크**하여 토큰 만료 시점을 확인하기 위해 처리를 진행하였다 만료 시간이 되면 즉시 처리될 것이라 생각했지만, 이 역시 예상대로 동작하지 않았다.

> 이유는 해당시간이 초과가 되어버리면 토큰이 아예만료가되어서 토큰재생성이 불가 되는 expired 오류가 나기 시작하였고 이를 해결하기 위해 고민을 하다가 만료 시간 5분 전에 갱신이 이루어지도록 수정하니 해다 오류를 해결할 수 있었다.

> 이후 다른 기능을 작업하다가 조원이 기능이 문제가 생긴다라는 것을 같이 봐주다가 내가 이전에 제작한 기능으로 인해 문제가 생겼다라는 것을 알 수 있었다 1초 단위로 계속 시간을 체크하는 방식이 프론트엔드에서 **무한 로딩**이나 예기치 못한 오류를 유발하는 원인이 되었던 것이다.

> 그리고 실행을 할때 로그아웃을 하지 않고 다음날이나 시간이 꽤 지나서 다시 서버를 실행을 하게 되면은 계속 expired 에러가 나왔었다

> 이로인해 다른 팀원이 프론트 작업을 할 때도 이러한 문제로 인해 개발 과정이 방해받는 상황이 생겼고 이러한 문제를 어떻게 해결해야 할지 고민하다가 다른 사람들은 어떻게 처리했는지에 대해 궁금하여 블로그를 뒤져 보기 시작했다.

> 블로그를 찾아보니 세션에서 처리를 하거나 토큰을 쓰되 쿠키를 활용하여 진행을 한다고 이야기를 하였다 그러나 나는 이번에 토큰 활용으로 처리하고 싶은 나의 개인적인 생각으로 인해 토큰만 사용하고 싶었다

> 블로그에서 딱히 성과가 없자 chat GPT를 사용을하여 이러한 방법에 대해의견을 물어보았다

> GPT는 페이지를 옮겨다닐 때 로그인 상태를 관리하는 방식을 구현하면서 한 가지 의문이 들었다."만약 사용자가 특정 페이지에서 오랜 시간 머무르게 된다면 어떻게 될까?"예상대로, 사용자가 페이지를 오래 머물러 있는 상황에서 토큰 만료 시간이 지나자 **expired 에러**가 발생했다

> 로그인 상태를 유지하기 위해 사용되는 **토큰(Token)**은 보안상의 이유로 만료 시간이 설정되어 있다. 하지만 사용자가 페이지를 계속 유지하고 새로 고침이나 이동 없이 활동하지 않을 경우, 토큰이 만료된 뒤에야 문제가 드러난다.

> 이로 인해 사용자는 의도치 않게 로그인이 풀리거나, 오류 메시지를 마주하게 되는 불편을 겪게 된다. 이 문제를 해결하지 않으면, 사용자 경험과 보안 모두에서 부정적인 영향을 초래할 수 있을것 같다.

> 이러한 문제를 한번에 잡을 방법을 생각해보다가 애플리케이션이 실행되거나 새로 고침될 때, 토큰의 남은 유효 시간을 먼저 확인하도록 설정했다. 만약 만료 시간이 0 이하로 지나있거나 현재 시간보다 이전이라면, 사용자를 즉시 **로그아웃 처리** 하여 만료된 토큰 상태로 인해 발생할 수 있는 문제를 방지했다. 이로써 사용자가 페이지를 장시간 방치한 후 다시 활동하려 할 때 겪는 갑작스러운 에러를 사전에 차단할 수 있었고 이러한 코드를 로그인 관리 함수에 추가를 하니 자동적으로 로그아웃이 되는 것도 확인을 하여 해당 오류를 해결을 할 수 있었다

### 이후 계획

> 일단 코드를 작성을 하면서 중복되는 부분도 많았고 기능 구현에 어려운 점이있어서 기능이 작동만하게 만들어놓은 부분도 있어서 이러한 부분들을 수정을 하고 정리해야 할 것 같다

### 마무리

> 프로젝트와 수업을 진행을 하면서 학교에서 배우지 못한 세부적인 기능들과 구조를 배우기도 하고 처음 들어보는 기능들을 접하기도 했다

> 이러한 과정속에서 여러번 한계에 도달하기도 했지만 이러한 과정들이 언젠가는 삶을 살아가다 보면 도움이 되지 않을까 라는 생각이 들기도 한다
